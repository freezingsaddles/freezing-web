---
title: Supple Ride
description: |
  Number of miles multiplied by tyre width (2" is <code>#FSrealsuppleride2</code>,
  3.1" is <code>#FSrealsuppleride3.1</code>, etc).
  Capital Bikeshare rides tagged with <code>#CABI</code> automatically count as 2" tyre rides,
  see also <a href="/pointless/hashtag/cabi">CABI rides</a>
fields:
  - name: athlete_id
    visible: false
  - name: athlete_name
    label: Rider
    format: '<a href="/people/{athlete_id}" class="hover-underline">{athlete_name}</a>'
  - name: supple_score
    label: Supple Mile Score
    rank_by: true
    type: number
query: |
  select
    T.id as athlete_id,
    T.athlete_name,
    sum(T.distance * T.tyre_width) as supple_score
  from (
    select
      A.id,
      A.display_name as athlete_name,
      R.distance,
      case
        when R.name like '%#cabi%' collate utf8mb4_general_ci then 2
        else 
          cast(
            regexp_substr(R.name, '(?<=#FSrealsuppleride)[0-9.]+')
            as double precision
          )
      end as tyre_width
    from
      rides R join
      athletes A on A.id = R.athlete_id
    ) as T
  where
    T.tyre_width >= 2
  group by
    T.id
  order by
    supple_score desc,
    athlete_name asc
